@using Syncfusion.Blazor.Data
@using Syncfusion.Blazor.DropDowns

<SfComboBox TValue="string" TItem="OrdersDetails" Placeholder="Select customer">
    <SfDataManager AdaptorInstance="@typeof(CustomAdaptor)" Adaptor="Adaptors.CustomAdaptor"></SfDataManager>
    <ComboBoxFieldSettings Value="CustomerID" Text="CustomerID"></ComboBoxFieldSettings>
</SfComboBox>

@code {
    public class Orders
    {
        public Orders() { }
        public Orders(int OrderID, string CustomerID)
        {
            this.OrderID = OrderID;
            this.CustomerID = CustomerID;
        }
        public int OrderID { get; set; }
        public string CustomerID { get; set; }
    }

    public class OrdersDetails
    {
        public int OrderID { get; set; }
        public string? CustomerID { get; set; }
        public int? EmployeeID { get; set; }
        public string? ShipCountry { get; set; }

        public static List<OrdersDetails> GetAllRecords()
        {
            List<OrdersDetails> order = new List<OrdersDetails>();
            order.Add(new OrdersDetails() { OrderID = 10248, CustomerID = "VINET", EmployeeID = 5, ShipCountry = "France" });
            order.Add(new OrdersDetails() { OrderID = 10249, CustomerID = "TOMSP", EmployeeID = 6, ShipCountry = "Germany" });
            order.Add(new OrdersDetails() { OrderID = 10250, CustomerID = "HANAR", EmployeeID = 4, ShipCountry = "Brazil" });
            order.Add(new OrdersDetails() { OrderID = 10251, CustomerID = "VICTE", EmployeeID = 3, ShipCountry = "Brazil" });
            order.Add(new OrdersDetails() { OrderID = 10252, CustomerID = "SUPRD", EmployeeID = 4, ShipCountry = "Belgium" });
            order.Add(new OrdersDetails() { OrderID = 10253, CustomerID = "HANAR", EmployeeID = 3, ShipCountry = "Brazil" });
            order.Add(new OrdersDetails() { OrderID = 10254, CustomerID = "CHOPS", EmployeeID = 5, ShipCountry = "Switzerland" });
            order.Add(new OrdersDetails() { OrderID = 10255, CustomerID = "RICSU", EmployeeID = 9, ShipCountry = "Switzerland" });
            order.Add(new OrdersDetails() { OrderID = 10256, CustomerID = "WELLI", EmployeeID = 3, ShipCountry = "Austria" });
            order.Add(new OrdersDetails() { OrderID = 10257, CustomerID = "HILAA", EmployeeID = 4, ShipCountry = "USA" });

            for (int i = 1; i <= 40; i++)
            {
                order.Add(new OrdersDetails()
                {
                    OrderID = 10300 + i,
                    CustomerID = $"CUST{i:D3}",
                    EmployeeID = (i % 9) + 1,
                    ShipCountry = i % 2 == 0 ? "India" : "USA"
                });
            }

            return order;
        }
    }

    public class CustomAdaptor : DataAdaptor
    {
        static readonly HttpClient client = new HttpClient();

        public static List<OrdersDetails> order = OrdersDetails.GetAllRecords();

        public override object Read(DataManagerRequest dm, string? key = null)
        {
            IEnumerable<OrdersDetails> DataSource = order;

            if (dm.Search != null && dm.Search.Count > 0)
            {
                DataSource = DataOperations.PerformSearching(DataSource, dm.Search);
            }

            if (dm.Sorted != null && dm.Sorted.Count > 0)
            {
                DataSource = DataOperations.PerformSorting(DataSource, dm.Sorted);
            }

            if (dm.Where != null && dm.Where.Count > 0)
            {
                DataSource = DataOperations.PerformFiltering(DataSource, dm.Where, dm.Where[0].Operator);
            }

            int count = DataSource.Count();

            if (dm.Skip != 0)
            {
                DataSource = DataOperations.PerformSkip(DataSource, dm.Skip);
            }

            if (dm.Take != 0)
            {
                DataSource = DataOperations.PerformTake(DataSource, dm.Take);
            }

            return dm.RequiresCounts
                ? new DataResult { Result = DataSource, Count = count }
                : (object)DataSource;
        }
    }
}